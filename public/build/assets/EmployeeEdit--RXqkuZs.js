import{d as N,z as p,y as v,n as E,c as o,o as s,a as r,u as d,m as $,w as x,b as l,h as M,i as y,t as c,F as j}from"./app-BCQPRmpY.js";import{_ as C}from"./AppLayout.vue_vue_type_script_setup_true_lang-t7VvQSA_.js";import{_ as k}from"./Input.vue_vue_type_script_setup_true_lang-BHQgoWrk.js";import{_ as K}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-D9y2ant4.js";import"./useForwardExpose-BQwV3l5m.js";import"./RovingFocusGroup-CGXIISCN.js";const S={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},B={key:0,class:"text-red-500 text-xs mt-1"},T={key:0,class:"text-red-500 text-xs mt-1"},U={key:0,class:"text-red-500 text-xs mt-1"},q={key:0},z={key:1},D={key:0,class:"text-green-600 text-center mt-2"},F={key:1,class:"text-red-500 text-center mt-2"},L=N({__name:"EmployeeEdit",props:{id:{}},setup(b){const _=[{title:"Data Karyawan",href:"/data-karyawan"},{title:"Edit Karyawan",href:"/data-karyawan/edit"}],f=b;p();async function w(i){const n=await(await fetch(`/api/data-karyawan/${i}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${f._token}`}})).json();a.name=n.data.name,a.email=n.data.email,a.phone=n.data.phone}const a=v({name:"",email:"",phone:""}),t=v({name:"",email:"",phone:""}),u=p(!1),h=p(!1),m=p("");function V(){return t.name=a.name?"":"Nama is required",t.email=a.email&&/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(a.email)?"":"Valid email is required",t.phone=a.phone?"":"No.handphone is required",!t.name&&!t.email&&!t.phone}async function g(){if(V()){u.value=!0;try{const i=await fetch(`/api/data-karyawan/${f.id}/update`,{method:"put",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),e=await i.json();i.ok?h.value=!0:(h.value=!1,"name"in e.error?m.value=e.error.name[0]:"email"in e.error?m.value=e.error.email[0]:"phone"in e.error&&(m.value=e.error.phone[0]))}catch(i){console.log(i)}u.value=!1,a.name="",a.email="",a.phone="",setTimeout(()=>{m.value=""},2e3)}}return E(()=>{w(f.id)}),(i,e)=>(s(),o(j,null,[r(d($),{title:"Karyawan"}),r(C,{breadcrumbs:_},{default:x(()=>[l("div",S,[l("form",{onSubmit:M(g,["prevent"]),class:"space-y-6 bg-white dark:bg-gray-900 p-6 rounded-xl shadow"},[l("div",null,[e[3]||(e[3]=l("label",{class:"block text-sm font-medium mb-1",for:"name"},"Nama",-1)),r(d(k),{id:"name",modelValue:a.name,"onUpdate:modelValue":e[0]||(e[0]=n=>a.name=n),placeholder:"Masukkan nama"},null,8,["modelValue"]),t.name?(s(),o("div",B,c(t.name),1)):y("",!0)]),l("div",null,[e[4]||(e[4]=l("label",{class:"block text-sm font-medium mb-1",for:"email"},"Email",-1)),r(d(k),{id:"email",modelValue:a.email,"onUpdate:modelValue":e[1]||(e[1]=n=>a.email=n),placeholder:"Masukkan email"},null,8,["modelValue"]),t.email?(s(),o("div",T,c(t.email),1)):y("",!0)]),l("div",null,[e[5]||(e[5]=l("label",{class:"block text-sm font-medium mb-1",for:"phone"},"No.Handphone",-1)),r(d(k),{id:"phone",modelValue:a.phone,"onUpdate:modelValue":e[2]||(e[2]=n=>a.phone=n),placeholder:"Masukkan no.handphone"},null,8,["modelValue"]),t.phone?(s(),o("div",U,c(t.phone),1)):y("",!0)]),r(d(K),{type:"submit",disabled:u.value,class:"w-full"},{default:x(()=>[u.value?(s(),o("span",q,"Submitting...")):(s(),o("span",z,"Update Karyawan"))]),_:1},8,["disabled"]),h.value?(s(),o("div",D,"Karyawan berhasil diupdate!")):(s(),o("div",F,c(m.value),1))],32)])]),_:1})],64))}});export{L as default};
