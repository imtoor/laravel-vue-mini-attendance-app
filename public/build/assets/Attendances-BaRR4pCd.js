import{d as T,n as $,r as u,h as j,o as S,c as i,a as r,b as o,u as l,m as P,w as g,e,P as M,i as B,F as f,j as h,t as d,g as _}from"./app-CL_3iClk.js";import{_ as D}from"./AppLayout.vue_vue_type_script_setup_true_lang-D5qkNL9B.js";import{_ as E}from"./PlaceholderPattern.vue_vue_type_script_setup_true_lang-gsOt8oQ1.js";import{_ as y}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-0y1kkzj-.js";import{h as w}from"./moment-C5S46NFB.js";import{F}from"./fingerprint-DjYj6N45.js";import"./useForwardExpose-Disf0T_g.js";import"./RovingFocusGroup-BX-ua9iS.js";import"./createLucideIcon-DrcJA3h9.js";const Y={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},z={class:"relative min-h-[100vh] flex-1 rounded-xl border border-sidebar-border/70 dark:border-sidebar-border md:min-h-min bg-white dark:bg-gray-900"},J={key:0,class:"flex items-center justify-center h-64"},U={key:1},V={key:0,class:"overflow-x-auto rounded-lg shadow"},O={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},G={class:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700"},K={class:"px-6 py-4 whitespace-nowrap"},L={class:"px-6 py-4 whitespace-nowrap"},R={class:"px-6 py-4 whitespace-nowrap"},W={class:"px-6 py-4 whitespace-wrap"},q={key:1,class:"overflow-x-auto rounded-lg shadow"},H={class:"min-w-full divide-y divide-gray-200 dark:divide-gray-700"},I={class:"bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700"},Q={colspan:"3"},X={class:"flex justify-between items-center mt-4"},Z={class:"text-sm text-gray-600 dark:text-gray-300"},ee={class:"flex gap-2"},x=10,ue=T({__name:"Attendances",setup(te){w.locale("Asia/Makassar");const b=[{title:"Data Absensi",href:"/data-absensi"}],v=$().props.auth.user,m=u([]),p=u(!1),c=u(0),k=u(""),n=u(1),N=j(()=>Math.ceil(c.value/x));async function C(){p.value=!0;try{const t=await(await fetch("/api/data-absensi",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:v.id})})).json();m.value=t.data.item,c.value=t.data.total}catch(a){console.log(a)}p.value=!1}async function A(){p.value=!0;try{if(confirm("ABSEN SEKARANG ?")){const a=w().format("YYYY-MM-DD hh:mm:ss"),s=await(await fetch("/api/data-absensi/add",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({users_id:v.id,created_at:a})})).json();if(s.code!=200)throw s.msg;alert(s.msg.toUpperCase())}}catch(a){throw alert(a.toUpperCase()),new Error(a)}p.value=!1}return S(()=>{C()}),(a,t)=>(r(),i(f,null,[o(l(P),{title:"Absensi"}),o(D,{breadcrumbs:b},{default:g(()=>[e("div",Y,[o(l(y),{"as-child":"",class:"text-xl rounded-lg",onClick:t[1]||(t[1]=s=>A())},{default:g(()=>[o(l(M),{href:"#",onClick:t[0]||(t[0]=B(()=>{},["prevent"]))},{default:g(()=>[o(l(F),{class:"h-4 w-4",size:"64"}),t[4]||(t[4]=e("span",null,"Absen Sekarang",-1))]),_:1})]),_:1}),e("div",z,[p.value?(r(),i("div",J,[o(E)])):(r(),i("div",U,[c.value>0?(r(),i("div",V,[e("table",O,[t[5]||(t[5]=e("thead",{class:"bg-gray-50 dark:bg-gray-800"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"No."),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Nama"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Tanggal"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Jam")])],-1)),e("tbody",G,[(r(!0),i(f,null,h(m.value,s=>(r(),i("tr",{key:s.id},[e("td",K,d(s.no)+".",1),e("td",L,d(s.name.toString().toUpperCase()),1),e("td",R,d(`${s.created_at.split("T")[0].split("-")[2]}-${s.created_at.split("T")[0].split("-")[1]}-${s.created_at.split("T")[0].split("-")[0]}`),1),e("td",W,d(`${s.created_at.toString().split("T")[1].slice(0,8)}`),1)]))),128))])])])):(r(),i("div",q,[e("table",H,[t[6]||(t[6]=e("thead",{class:"bg-gray-50 dark:bg-gray-800"},[e("tr",null,[e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"No."),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Nama"),e("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider"},"Waktu")])],-1)),e("tbody",I,[(r(!0),i(f,null,h(m.value,s=>(r(),i("tr",{key:s.id},[e("td",Q,d(k.value),1)]))),128))])])])),e("div",X,[e("div",Z," Showing "+d((n.value-1)*x+1)+"- "+d(Math.min(n.value*x,c.value))+" of "+d(c.value)+" absensi ",1),e("div",ee,[o(l(y),{size:"sm",disabled:n.value===1,onClick:t[2]||(t[2]=s=>a.goToPage(n.value-1))},{default:g(()=>t[7]||(t[7]=[_("Previous")])),_:1},8,["disabled"]),o(l(y),{size:"sm",disabled:n.value===N.value,onClick:t[3]||(t[3]=s=>a.goToPage(n.value+1))},{default:g(()=>t[8]||(t[8]=[_("Next")])),_:1},8,["disabled"])])])]))])])]),_:1})],64))}});export{ue as default};
