import{d as w,y,z as c,c as o,o as l,a as s,u as d,m as V,w as k,b as n,h as g,i as h,t as p,F as N}from"./app-BCQPRmpY.js";import{_ as S}from"./AppLayout.vue_vue_type_script_setup_true_lang-t7VvQSA_.js";import{_ as b}from"./Input.vue_vue_type_script_setup_true_lang-BHQgoWrk.js";import{_ as K}from"./AppLogoIcon.vue_vue_type_script_setup_true_lang-D9y2ant4.js";import"./useForwardExpose-BQwV3l5m.js";import"./RovingFocusGroup-CGXIISCN.js";const M={class:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4"},T={key:0,class:"text-red-500 text-xs mt-1"},C={key:0,class:"text-red-500 text-xs mt-1"},$={key:0,class:"text-red-500 text-xs mt-1"},q={key:0},B={key:1},E={key:0,class:"text-green-600 text-center mt-2"},U={key:1,class:"text-red-500 text-center mt-2"},J=w({__name:"EmployeeAdd",setup(j){const v=[{title:"Data Karyawan",href:"/data-karyawan"},{title:"Tambah Karyawan",href:"/data-karyawan/tambah"}],a=y({name:"",email:"",phone:""}),t=y({name:"",email:"",phone:""}),u=c(!1),f=c(!1),r=c("");function x(){return t.name=a.name?"":"Nama is required",t.email=a.email&&/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(a.email)?"":"Valid email is required",t.phone=a.phone?"":"No.handphone is required",!t.name&&!t.email&&!t.phone}async function _(){if(x()){u.value=!0;try{const i=await fetch("/api/data-karyawan",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}),e=await i.json();i.ok?f.value=!0:(f.value=!1,"name"in e.error?r.value=e.error.name[0]:"email"in e.error?r.value=e.error.email[0]:"phone"in e.error&&(r.value=e.error.phone[0]))}catch(i){console.log(i)}u.value=!1,a.name="",a.email="",a.phone="",setTimeout(()=>{r.value=""},2e3)}}return(i,e)=>(l(),o(N,null,[s(d(V),{title:"Karyawan"}),s(S,{breadcrumbs:v},{default:k(()=>[n("div",M,[n("form",{onSubmit:g(_,["prevent"]),class:"space-y-6 bg-white dark:bg-gray-900 p-6 rounded-xl shadow"},[n("div",null,[e[3]||(e[3]=n("label",{class:"block text-sm font-medium mb-1",for:"name"},"Nama",-1)),s(d(b),{id:"name",modelValue:a.name,"onUpdate:modelValue":e[0]||(e[0]=m=>a.name=m),placeholder:"Masukkan nama"},null,8,["modelValue"]),t.name?(l(),o("div",T,p(t.name),1)):h("",!0)]),n("div",null,[e[4]||(e[4]=n("label",{class:"block text-sm font-medium mb-1",for:"email"},"Email",-1)),s(d(b),{id:"email",modelValue:a.email,"onUpdate:modelValue":e[1]||(e[1]=m=>a.email=m),placeholder:"Masukkan email"},null,8,["modelValue"]),t.email?(l(),o("div",C,p(t.email),1)):h("",!0)]),n("div",null,[e[5]||(e[5]=n("label",{class:"block text-sm font-medium mb-1",for:"phone"},"No.Handphone",-1)),s(d(b),{id:"phone",modelValue:a.phone,"onUpdate:modelValue":e[2]||(e[2]=m=>a.phone=m),placeholder:"Masukkan no.handphone"},null,8,["modelValue"]),t.phone?(l(),o("div",$,p(t.phone),1)):h("",!0)]),s(d(K),{type:"submit",disabled:u.value,class:"w-full"},{default:k(()=>[u.value?(l(),o("span",q,"Submitting...")):(l(),o("span",B,"Tambah Karyawan"))]),_:1},8,["disabled"]),f.value?(l(),o("div",E,"Karyawan berhasil ditambahkan!")):(l(),o("div",U,p(r.value),1))],32)])]),_:1})],64))}});export{J as default};
